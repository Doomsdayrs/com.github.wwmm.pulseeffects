From 59c041e04d54a5a2f325e3eaff405e49ccbbe922 Mon Sep 17 00:00:00 2001
From: Patrik Nilsson <asavartzeth@gmail.com>
Date: Mon, 5 Mar 2018 18:23:09 +0100
Subject: [PATCH] meson: enable bs2b compilation

Add meson build system support to bs2b plugin.

https://bugzilla.gnome.org/show_bug.cgi?id=794346
---
 ext/bs2b/meson.build | 15 +++++++++++++++
 ext/meson.build      |  2 +-
 2 files changed, 16 insertions(+), 1 deletion(-)
 create mode 100644 ext/bs2b/meson.build

diff --git a/ext/bs2b/meson.build b/ext/bs2b/meson.build
new file mode 100644
index 000000000..6007ea622
--- /dev/null
+++ b/ext/bs2b/meson.build
@@ -0,0 +1,15 @@
+bs2b_sources = [ 'gstbs2b.c', ]
+
+bs2b_dep = dependency('libbs2b', version : '>=3.1.0', required : false)
+
+if bs2b_dep.found()
+  gstbs2b = library('gstbs2b',
+    bs2b_sources,
+    c_args : gst_plugins_bad_args,
+    link_args : noseh_link_args,
+    include_directories : [configinc, libsinc],
+    dependencies : [gstaudio_dep, gstbase_dep, bs2b_dep],
+    install : true,
+    install_dir : plugins_install_dir,
+  )
+endif
diff --git a/ext/meson.build b/ext/meson.build
index cd193b7b3..150ed5170 100644
--- a/ext/meson.build
+++ b/ext/meson.build
@@ -1,6 +1,6 @@
 subdir('assrender')
 subdir('aom')
-#subdir('bs2b')
+subdir('bs2b')
 subdir('bz2')
 subdir('chromaprint')
 subdir('curl')
-- 
2.17.1

